<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css"> <!-- Asegúrate de que este archivo esté bien enlazado -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <title>Música</title>
    <style>
        body, html {
            height: 100%; /* Ocupa el 100% de la altura */
            margin: 0;
            display: flex;
            flex-direction: column;
        }

        .full-body {
            flex: 1; /* Ocupa todo el espacio disponible */
            display: flex;
            flex-direction: column; /* Apila los elementos verticalmente */
            padding: 20px; /* Espaciado interno */
            overflow-y: auto; /* Permite desplazamiento si el contenido es grande */
        }

        .card {
            min-height: 400px; /* Aumentar el tamaño mínimo de la tarjeta */
            margin-bottom: 20px; /* Espacio entre tarjetas */
            border-radius: 10px; /* Bordes redondeados para la tarjeta */
        }

        .row {
            display: flex;
            flex-direction: row;
            align-items: stretch; /* Asegura que los contenedores de imágenes y videos se estiren para tener la misma altura */
        }

        .images-container, .videos-container {
            flex: 1; /* Hacer que ambas secciones tengan el mismo tamaño */
            margin: 10px;
        }

        .carousel-inner img {
            object-fit: cover; /* Mantiene la proporción de la imagen sin cortarla */
            border-radius: 10px; /* Bordes redondeados para las imágenes */
        }

        .video-thumbnail {
            object-fit: cover; /* Mantiene la proporción de la imagen sin cortarla */
            border-radius: 10px; /* Bordes redondeados para las miniaturas */
            cursor: pointer; /* Cambia el cursor al pasar sobre la miniatura */
        }

        .card-header {
            display: flex;
            justify-content: space-between; /* Alinea el nombre del artista y el botón */
            align-items: center; /* Alinea verticalmente */
        }

        .card-body {
            display: flex; /* Hacer que el contenido de la tarjeta use flexbox */
            flex-direction: column; /* Para apilar el contenido verticalmente */
        }

        .description {
            margin-top: 10px; /* Espaciado superior para la descripción */
            font-size: 0.9em; /* Tamaño de fuente más pequeño para la descripción */
            color: #555; /* Color más suave para la descripción */
        }
    </style>
</head>
<body>

<div class="full-body mt-5">
    <h1 class="text-center">Artistas</h1>
    <div id="artistas-container"></div>
</div>

<script>
    // Función para mostrar los artistas
    function mostrarArtistas(artistas) {
        const container = document.getElementById('artistas-container');
        let cardHTML = '';

        // Verifica si artistas es un array
        if (!Array.isArray(artistas)) {
            console.error('La respuesta no es un array:', artistas);
            return;
        }

        artistas.forEach(artista => {
            console.log(artista); // Para depuración
            if (!artista.images || !artista.videos) {
                console.error(`El artista ${artista.artist} no tiene imágenes o videos definidos.`);
                return;
            }

            cardHTML += `
                <div class="card mb-4">
                    <div class="card-header">
                        <h2>${artista.artist}</h2>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="images-container">
                                <div id="carousel-images-${artista.artist.replace(/\s+/g, '')}" class="carousel slide" data-ride="carousel">
                                    <div class="carousel-inner">
                                        ${artista.images.map((image, index) => `
                                            <div class="carousel-item ${index === 0 ? 'active' : ''}">
                                                <img src="${image}" class="d-block" alt="${artista.artist}">
                                            </div>
                                        `).join('')}
                                    </div>
                                    <a class="carousel-control-prev" href="#carousel-images-${artista.artist.replace(/\s+/g, '')}" role="button" data-slide="prev">
                                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                    <a class="carousel-control-next" href="#carousel-images-${artista.artist.replace(/\s+/g, '')}" role="button" data-slide="next">
                                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </div>
                            </div>
                            <div class="videos-container">
                                <div id="carousel-videos-${artista.artist.replace(/\s+/g, '')}" class="carousel slide mt-3" data-ride="carousel">
                                    <div class="carousel-inner">
                                        ${artista.videos.map((video, index) => {
                                            // Extraer el video ID de la URL de YouTube
                                            const videoId = new URL(video).searchParams.get("v") || video.split('/').pop(); // Maneja ambos tipos de URL
                                            return `
                                                <div class="carousel-item ${index === 0 ? 'active' : ''}">
                                                    <a href="${video}" target="_blank">
                                                        <img src="https://img.youtube.com/vi/${videoId}/hqdefault.jpg" class="video-thumbnail" alt="Miniatura de ${artista.artist}">
                                                    </a>
                                                </div>
                                            `;
                                        }).join('')}
                                    </div>
                                    <a class="carousel-control-prev" href="#carousel-videos-${artista.artist.replace(/\s+/g, '')}" role="button" data-slide="prev">
                                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Previous</span>
                                    </a>
                                    <a class="carousel-control-next" href="#carousel-videos-${artista.artist.replace(/\s+/g, '')}" role="button" data-slide="next">
                                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Next</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <p class="description">${artista.description}</p> <!-- Asegúrate de que esto esté presente -->
                    </div>
                </div>
            `;
        });

        container.innerHTML = cardHTML;
    }

    // Cargar los artistas desde el archivo JSON
    fetch('artistas.json')
        .then(response => {
            if (!response.ok) {
                throw new Error('Error al cargar los artistas');
            }
            return response.json();
        })
        .then(artistas => {
            console.log(artistas); // Añadir esta línea para verificar la estructura
            mostrarArtistas(artistas);
        })
        .catch(error => console.error('Error:', error));
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>
